<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <description>Post to a public group that a Service Appointment was set to Logic Box Access needed or LnW Repair Order Substatus.</description>
        <name>LnW_Repair_Chatter_Post</name>
        <label>LnW Repair Chatter Post</label>
        <locationX>1282</locationX>
        <locationY>3768</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_AccountId</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <stringValue>0F98W00000158LuSAI</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <description>Post to a public group that a Service Appointment was set to Logic Box Access needed or LnW Repair Order Substatus.</description>
        <name>LnW_Repair_Chatter_Post_0</name>
        <label>LnW Repair Chatter Post</label>
        <locationX>1546</locationX>
        <locationY>3768</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_AccountId</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <stringValue>0F98W00000158NvSAI</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <description>Post to a public group that a Service Appointment was set to Logic Box Access needed or LnW Repair Order Substatus.</description>
        <name>LnW_Repair_Chatter_Post_0_0</name>
        <label>LnW Repair Chatter Post</label>
        <locationX>1810</locationX>
        <locationY>3768</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_AccountId</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <stringValue>0F98W00000158O0SAI</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <description>Post to a public group that a Service Appointment was set to Logic Box Access needed or LnW Repair Order Substatus.</description>
        <name>LnW_Repair_Chatter_Post_0_0_0</name>
        <label>LnW Repair Chatter Post</label>
        <locationX>2074</locationX>
        <locationY>3768</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_AccountId</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <stringValue>0F98W00000158OZSAY</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <description>Post to a public group that a Service Appointment was set to Logic Box Access needed or LnW Repair Order Substatus.</description>
        <name>LnW_Repair_Chatter_Post_0_0_0_0</name>
        <label>LnW Repair Chatter Post</label>
        <locationX>2338</locationX>
        <locationY>3768</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_AccountId</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <stringValue>0F98W00000158OUSAY</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <description>Post to a public group that a Service Appointment was set to Logic Box Access needed or LnW Repair Order Substatus.</description>
        <name>LnW_Repair_Chatter_Post_0_0_0_0_0</name>
        <label>LnW Repair Chatter Post</label>
        <locationX>2602</locationX>
        <locationY>3768</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_AccountId</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <stringValue>0F98W00000158PDSAY</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <description>Post to a public group that a Service Appointment was set to Logic Box Access needed or LnW Repair Order Substatus.</description>
        <name>LnW_Repair_Chatter_Post_0_0_0_0_0_0</name>
        <label>LnW Repair Chatter Post</label>
        <locationX>2866</locationX>
        <locationY>3768</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_AccountId</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <stringValue>0F98W00000158OySAI</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <description>Post to a public group that a Service Appointment was set to Logic Box Access needed or LnW Repair Order Substatus.</description>
        <name>LnW_Repair_Chatter_Post_0_0_0_0_0_0_0</name>
        <label>LnW Repair Chatter Post</label>
        <locationX>3130</locationX>
        <locationY>3768</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_AccountId</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <stringValue>0F98W00000158P3SAI</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <description>Post to a public group that a Service Appointment was set to Logic Box Access needed or LnW Repair Order Substatus.</description>
        <name>LnW_Repair_Chatter_Post_0_0_0_0_0_0_0_0</name>
        <label>LnW Repair Chatter Post</label>
        <locationX>3394</locationX>
        <locationY>3768</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_AccountId</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <stringValue>0F98W00000158P8SAI</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Relationship_Manager_Notification</name>
        <label>Relationship Manager Notification</label>
        <locationX>2470</locationX>
        <locationY>4224</locationY>
        <actionName>PostRichChatter</actionName>
        <actionType>apex</actionType>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Drip_Dispatch</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>SGI_LnW_Repair_Notification_For_RMs</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetNameOrId</name>
            <value>
                <elementReference>Get_AccountId.Id</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>55.0</apiVersion>
    <assignments>
        <name>Add_SA_to_SAs_For_Update_Variable</name>
        <label>Add SA to &quot;SAs For Update&quot; Variable</label>
        <locationX>666</locationX>
        <locationY>3888</locationY>
        <assignmentItems>
            <assignToReference>ServiceAppointmentsForUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_Scheduled_SAs_for_the_Tech</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Scheduled_SAs_for_the_Tech</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Set the Variables on SA and WO for Appointments in Queue to No.</description>
        <name>Assign_Appointments_in_Queue_to_No_on_SA_and_WO</name>
        <label>Assign Appointments in Queue to No on SA and WO</label>
        <locationX>2250</locationX>
        <locationY>2952</locationY>
        <assignmentItems>
            <assignToReference>Get_WO_Related_to_SA.Appointments_in_Queue__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>No</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Work_Order</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Set the Variables on SA and WO for Appointments in Queue to Yes.</description>
        <name>Assign_Appointments_in_Queue_to_Yes_on_SA_and_WO</name>
        <label>Assign Appointments in Queue to Yes on SA and WO</label>
        <locationX>1986</locationX>
        <locationY>2952</locationY>
        <assignmentItems>
            <assignToReference>Get_WO_Related_to_SA.Appointments_in_Queue__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Yes</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Work_Order</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_New_Start_and_End_Times_for_This_Appointment</name>
        <label>Assign New Start and End Times for This Appointment</label>
        <locationX>666</locationX>
        <locationY>3768</locationY>
        <assignmentItems>
            <assignToReference>Loop_Scheduled_SAs_for_the_Tech.SchedStartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewStartTimeforSALoop</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Scheduled_SAs_for_the_Tech.SchedEndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewEndTimeForSALoop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_SA_to_SAs_For_Update_Variable</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Prior_Start_Time</name>
        <label>Assign Prior Start Time</label>
        <locationX>1436</locationX>
        <locationY>288</locationY>
        <assignmentItems>
            <assignToReference>PriorStartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record__Prior.SchedStartTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_if_changing_pinned_status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Set the Variables that are inputs to the subflow so you can set them to &apos;available for output&apos;</description>
        <name>Assign_Subflow_Variables</name>
        <label>Assign Subflow Variables</label>
        <locationX>3526</locationX>
        <locationY>888</locationY>
        <assignmentItems>
            <assignToReference>ServiceResource</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Service_Resource</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Time_Variables</name>
        <label>Assign Time Variables</label>
        <locationX>666</locationX>
        <locationY>3648</locationY>
        <assignmentItems>
            <assignToReference>ScheduledStartTimeForSALoop</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Scheduled_SAs_for_the_Tech.SchedStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ScheduledEndTimeForSALoop</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Scheduled_SAs_for_the_Tech.SchedEndTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_New_Start_and_End_Times_for_This_Appointment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assign the value for the Asset Playable Status to Nonplayable</description>
        <name>Set_Asset_Playable_Status_to_Nonplayable</name>
        <label>Set Asset Playable Status to Nonplayable</label>
        <locationX>1997</locationX>
        <locationY>2304</locationY>
        <assignmentItems>
            <assignToReference>Get_Asset_Related_to_Case.Asset_Playable_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Nonplayable</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Asset</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assign the value for the Asset Playable Status to Playable</description>
        <name>Set_Asset_Playable_Status_to_Playable</name>
        <label>Set Asset Playable Status to Playable</label>
        <locationX>1733</locationX>
        <locationY>2304</locationY>
        <assignmentItems>
            <assignToReference>Get_Asset_Related_to_Case.Asset_Playable_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Playable</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Asset</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Update the Case related to the Service Appointment to clear the Assigned Resource Field so the Case does not get lost.</description>
        <name>Set_Case_Variables_Cannot_Complete</name>
        <label>Set Case Variables</label>
        <locationX>3152</locationX>
        <locationY>3408</locationY>
        <assignmentItems>
            <assignToReference>Get_Case_from_WO.Assigned_Resource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SGI_LnW_Repair_substatus</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Update the Case related to the Service Appointment to clear the Assigned Resource Field so the Case does not get lost.</description>
        <name>Set_Case_Variables_Rejected</name>
        <label>Set Case Variables</label>
        <locationX>50</locationX>
        <locationY>3408</locationY>
        <assignmentItems>
            <assignToReference>Get_Case_from_WO.Assigned_Resource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Service_Resource_Shift</targetReference>
        </connector>
    </assignments>
    <decisions>
        <description>Decision node to decide how to set Appointments in Queue on SA and WO.</description>
        <name>Are_there_Appointments_in_the_Resources_s_Queue</name>
        <label>Are there Appointments in the Resources&apos;s Queue?</label>
        <locationX>2250</locationX>
        <locationY>2832</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Appointments_in_Queue_Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Service_Resource.Appointments_in_Queue__c</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Appointments_in_Queue_to_Yes_on_SA_and_WO</targetReference>
            </connector>
            <label>Appointments in Queue: Yes</label>
        </rules>
        <rules>
            <name>Appointments_in_Queue_No</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Service_Resource.Appointments_in_Queue__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Appointments_in_Queue_to_No_on_SA_and_WO</targetReference>
            </connector>
            <label>Appointments in Queue: No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_changing_pinned_status</name>
        <label>Check if changing pinned status</label>
        <locationX>1436</locationX>
        <locationY>408</locationY>
        <defaultConnector>
            <targetReference>Get_Assigned_Resource</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Changed</defaultConnectorLabel>
        <rules>
            <name>Pinned_Status_is_TRUE</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.FSL__Pinned__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Pinned Status is TRUE</label>
        </rules>
        <rules>
            <name>Pinned_Status_is_FALSE</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.FSL__Pinned__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Pinned Status is FALSE</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_SA_on_a_Shift</name>
        <label>Is SA on a Shift?</label>
        <locationX>974</locationX>
        <locationY>3408</locationY>
        <defaultConnector>
            <targetReference>Is_the_Case_Closed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_On_Shift</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Assigned_Resources_Shifts.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Drip_Dispatch</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_the_Case_Closed</name>
        <label>Is the Case Closed?</label>
        <locationX>2250</locationX>
        <locationY>4596</locationY>
        <defaultConnector>
            <targetReference>Update_Case_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Closed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Case_from_WO.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Start_and_End_Times_of_Other_Scheduled_Appointments</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_there_an_AsseT</name>
        <label>Is there an Asset?</label>
        <locationX>2063</locationX>
        <locationY>1944</locationY>
        <defaultConnector>
            <targetReference>Are_there_Appointments_in_the_Resources_s_Queue</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Asset_on_Case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Case_from_WO.AssetId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Asset_Related_to_Case</targetReference>
            </connector>
            <label>Yes - Asset on Case</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check if the territory is live for WM Scheduling Enhancements.</description>
        <name>Live_with_WM_Enhancements</name>
        <label>Live with WM Enhancements?</label>
        <locationX>3526</locationX>
        <locationY>1464</locationY>
        <defaultConnector>
            <targetReference>Update_Color_Not_Live</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Live</defaultConnectorLabel>
        <rules>
            <name>Live</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Territory_from_Service_Appointment.Live_with_WM_Scheduling_Enhancements__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_WO_Related_to_SA</targetReference>
            </connector>
            <label>Live</label>
        </rules>
    </decisions>
    <decisions>
        <name>Service_Appointment_Status</name>
        <label>Service Appointment Status?</label>
        <locationX>5198</locationX>
        <locationY>288</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>En_Route_and_Live_with_WM</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>En Route</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Live_with_WM_Scheduling_Enhancements__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Assigned_Resource2</targetReference>
            </connector>
            <label>En Route and Live with WM</label>
        </rules>
    </decisions>
    <decisions>
        <name>SGI_LnW_Repair_substatus</name>
        <label>SGI/LnW Repair?</label>
        <locationX>3152</locationX>
        <locationY>3528</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Drip_Dispatch</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Substatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>LnW Tech Needed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Substatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Logic Box Access</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>What_Territory_is_the_Service_Appointment_in</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Status</name>
        <label>Status?</label>
        <locationX>3526</locationX>
        <locationY>1008</locationY>
        <defaultConnector>
            <targetReference>Get_Territory_from_Service_Appointment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Scheduled2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Scheduled_Notifications</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Scheduled</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check the status of Machine Up Upon Departure when a Service Appointment is Updated.</description>
        <name>Status_Machine_Up_Upon_Departure</name>
        <label>Status?</label>
        <locationX>1865</locationX>
        <locationY>2184</locationY>
        <defaultConnector>
            <targetReference>Set_Asset_Playable_Status_to_Nonplayable</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Down</defaultConnectorLabel>
        <rules>
            <name>Up</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Machine_Up_Upon_Departure__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Asset_Playable_Status_to_Playable</targetReference>
            </connector>
            <label>Up</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check if the field was changed. Used as pseudo-entry condition as using get records next.</description>
        <name>Was_Machine_Up_Upon_Departure_Status_Changed_0</name>
        <label>Was Machine Up Upon Departure Status Changed?</label>
        <locationX>2250</locationX>
        <locationY>1824</locationY>
        <defaultConnector>
            <targetReference>Are_there_Appointments_in_the_Resources_s_Queue</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes1_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Machine_Up_Upon_Departure__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_there_an_AsseT</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check what the Service Appointment Status was updated to, run if meets the requirement.</description>
        <name>What_is_the_Status</name>
        <label>What is the Status?</label>
        <locationX>2250</locationX>
        <locationY>3288</locationY>
        <defaultConnector>
            <targetReference>Is_the_Case_Closed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>None2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>None</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_the_Case_Closed</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>None</label>
        </rules>
        <rules>
            <name>Rejected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Case_Variables_Rejected</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Rejected</label>
        </rules>
        <rules>
            <name>Scheduled</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_the_Case_Closed</targetReference>
            </connector>
            <label>Scheduled</label>
        </rules>
        <rules>
            <name>On_Site</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>In Progress</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Scheduled_SAs_for_the_Tech</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>On-Site</label>
        </rules>
        <rules>
            <name>Completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StatusCategory</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_SA_on_a_Shift</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Completed</label>
        </rules>
        <rules>
            <name>Cannot_Complete</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StatusCategory</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>CannotComplete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cannot Complete</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Case_Variables_Cannot_Complete</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Cannot Complete</label>
        </rules>
        <rules>
            <name>Dispatched</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Dispatched</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Dispatched_Notifications</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Dispatched</label>
        </rules>
        <rules>
            <name>Emergency_Dispatched</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.FSL__Emergency__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Dispatched_Notifications</targetReference>
            </connector>
            <label>Emergency Dispatched</label>
        </rules>
    </decisions>
    <decisions>
        <description>Look at the Service Territory assigned to the Service Appointment and send a chatter notification to the correct group of Regional Service Managers.</description>
        <name>What_Territory_is_the_Service_Appointment_in</name>
        <label>What Territory is the Service Appointment in?</label>
        <locationX>2470</locationX>
        <locationY>3648</locationY>
        <defaultConnector>
            <targetReference>Get_AccountId</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>Rockford</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rockford</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LnW_Repair_Chatter_Post</targetReference>
            </connector>
            <label>Rockford</label>
        </rules>
        <rules>
            <name>Chamseka</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Champaign</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Watseka</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LnW_Repair_Chatter_Post_0</targetReference>
            </connector>
            <label>Chamseka</label>
        </rules>
        <rules>
            <name>Collinsville</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Collinsville</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LnW_Repair_Chatter_Post_0_0</targetReference>
            </connector>
            <label>Collinsville</label>
        </rules>
        <rules>
            <name>Springfield</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Springfield</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LnW_Repair_Chatter_Post_0_0_0</targetReference>
            </connector>
            <label>Springfield</label>
        </rules>
        <rules>
            <name>Peoria</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Peoria</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LnW_Repair_Chatter_Post_0_0_0_0</targetReference>
            </connector>
            <label>Peoria</label>
        </rules>
        <rules>
            <name>Chicagoland_Tinley</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Chicagoland - Tinley Park</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LnW_Repair_Chatter_Post_0_0_0_0_0</targetReference>
            </connector>
            <label>Chicagoland - Tinley</label>
        </rules>
        <rules>
            <name>Chicagoland_North</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Chicagoland North</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LnW_Repair_Chatter_Post_0_0_0_0_0_0</targetReference>
            </connector>
            <label>Chicagoland North</label>
        </rules>
        <rules>
            <name>Chicagoland_Central</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Chicagoland Central</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LnW_Repair_Chatter_Post_0_0_0_0_0_0_0</targetReference>
            </connector>
            <label>Chicagoland Central</label>
        </rules>
        <rules>
            <name>Chicagoland_South</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Chicagoland South</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LnW_Repair_Chatter_Post_0_0_0_0_0_0_0_0</targetReference>
            </connector>
            <label>Chicagoland South</label>
        </rules>
    </decisions>
    <description>(With Notifications) Flow to Update the Service Appointment after the Database recognizes an Update.</description>
    <environments>Default</environments>
    <formulas>
        <description>Concatenate what was populated into the Tech Notes Mobile Field into the Tech Notes field with the Name of the User who made the change.</description>
        <name>ConcatName</name>
        <dataType>String</dataType>
        <expression>{!$Record.Solution_Notes__c} + BR() +
{!$User.FirstName}+&quot; &quot;+{!$User.LastName}+&quot;:&quot;+&quot;&apos;&quot;+{!$Record.Tech_Notes_Mobile__c}+&quot;&apos;&quot;</expression>
    </formulas>
    <formulas>
        <description>Formula Adding the Duration in Minutes of the Work Type to the Current Time.</description>
        <name>EstEndTime</name>
        <dataType>DateTime</dataType>
        <expression>{!CurrentTime} + ({!$Record.DurationInMinutes}/24/60)</expression>
    </formulas>
    <formulas>
        <name>NewEndTimeForSALoop</name>
        <dataType>DateTime</dataType>
        <expression>{!ScheduledEndTimeForSALoop}-{!ScheduledTimesOffset}</expression>
    </formulas>
    <formulas>
        <description>The new Scheduled Start time for the Scheduled Service Appointments being looped.</description>
        <name>NewStartTimeforSALoop</name>
        <dataType>DateTime</dataType>
        <expression>{!ScheduledStartTimeForSALoop}-{!ScheduledTimesOffset}</expression>
    </formulas>
    <formulas>
        <name>NULL</name>
        <dataType>String</dataType>
        <expression>NULL</expression>
    </formulas>
    <formulas>
        <description>The offset between the previous Scheduled Start/End Times and the new Scheduled Start/End times.</description>
        <name>ScheduledTimesOffset</name>
        <dataType>Number</dataType>
        <expression>{!PriorStartTime}-{!$Flow.CurrentDateTime}</expression>
        <scale>10</scale>
    </formulas>
    <interviewLabel>Service Appointment - After Update {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Service Appointment - After Update</label>
    <loops>
        <name>Loop_Scheduled_SAs_for_the_Tech</name>
        <label>Loop Scheduled SAs for the Tech</label>
        <locationX>578</locationX>
        <locationY>3528</locationY>
        <collectionReference>Get_Scheduled_SAs_for_the_Tech</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Time_Variables</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Is_the_Case_Closed</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <description>Gets account Id of relevant account</description>
        <name>Get_AccountId</name>
        <label>Get AccountId</label>
        <locationX>2470</locationX>
        <locationY>3984</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Regional_Relationship_Manager</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_WO_Related_to_SA.Account.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Account</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get the Asset related to the Case related to the Work Order related to the Service Appointment.</description>
        <name>Get_Asset_Related_to_Case</name>
        <label>Get Asset Related to Case</label>
        <locationX>1865</locationX>
        <locationY>2064</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Status_Machine_Up_Upon_Departure</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Case_from_WO.AssetId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Asset</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Used to get the Assigned Resource on the Service Appointment</description>
        <name>Get_Assigned_Resource</name>
        <label>Get Assigned Resource</label>
        <locationX>3526</locationX>
        <locationY>528</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Service_Resource</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceAppointmentId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>AssignedResource</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Assigned_Resource2</name>
        <label>Get Assigned Resource</label>
        <locationX>5066</locationX>
        <locationY>408</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Service_Resource2</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceAppointmentId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>AssignedResource</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Used to get Overtime Shifts from the Assigned Resource</description>
        <name>Get_Assigned_Resources_Shifts</name>
        <label>Get Assigned Resources Shifts</label>
        <locationX>3526</locationX>
        <locationY>768</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Subflow_Variables</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Assigned_Resource.ServiceResource.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>StartTime</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.SchedStartTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndTime</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.SchedEndTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Tentative</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Shift</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get Case related to the Work Order related to the Service Appointment.</description>
        <name>Get_Case_from_WO</name>
        <label>Get Case from WO</label>
        <locationX>2250</locationX>
        <locationY>1704</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Was_Machine_Up_Upon_Departure_Status_Changed_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_WO_Related_to_SA.CaseId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Regional_Relationship_Manager</name>
        <label>Get Regional Relationship Manager</label>
        <locationX>2470</locationX>
        <locationY>4104</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Relationship_Manager_Notification</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_AccountId.Relationship_Manager__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Gets all Service Appointments for the technician&apos;s current shift in the Status of &quot;Scheduled&quot;</description>
        <name>Get_Scheduled_SAs_for_the_Tech</name>
        <label>Get Scheduled SAs for the Tech</label>
        <locationX>578</locationX>
        <locationY>3408</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Scheduled_SAs_for_the_Tech</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Service_Resource_Shift__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Service_Resource_Shift__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Scheduled</stringValue>
            </value>
        </filters>
        <filters>
            <field>FSL__Pinned__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Service_Resource_Shift__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Service_Resource_on_SR_Shift__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Service_Resource.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ServiceAppointment</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get the Service Resource Assigned to the Service Appointment that launched this flow.</description>
        <name>Get_Service_Resource</name>
        <label>Get Service Resource</label>
        <locationX>3526</locationX>
        <locationY>648</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Assigned_Resources_Shifts</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Assigned_Resource.ServiceResourceId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ServiceResource</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Service_Resource2</name>
        <label>Get Service Resource</label>
        <locationX>5066</locationX>
        <locationY>528</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>On_Site_Reminder_Notification</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Assigned_Resource2.ServiceResourceId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ServiceResource</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Since the Assigned Resource Record has been deleted, get the shift the Service Appointment used to be on through the Service Resource Shift Field on the Service Appointment.</description>
        <name>Get_Service_Resource_Shift</name>
        <label>Get Service Resource Shift</label>
        <locationX>50</locationX>
        <locationY>3528</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Drip_Dispatch_Rejected</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Service_Resource_Shift__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Shift</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Querry for the Territory related to the Service Appointment record that launched the flow.</description>
        <name>Get_Territory_from_Service_Appointment</name>
        <label>Get Territory from Service Appointment</label>
        <locationX>3526</locationX>
        <locationY>1344</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Live_with_WM_Enhancements</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ServiceTerritoryId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ServiceTerritory</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get the WO Related to the Service Appointment</description>
        <name>Get_WO_Related_to_SA</name>
        <label>Get WO Related to SA</label>
        <locationX>2250</locationX>
        <locationY>1584</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Case_from_WO</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ParentRecordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <description>Update the Asset Based on the previous Assignment of Asset Playable Status.</description>
        <name>Update_Asset</name>
        <label>Update Asset</label>
        <locationX>1865</locationX>
        <locationY>2520</locationY>
        <connector>
            <targetReference>Are_there_Appointments_in_the_Resources_s_Queue</targetReference>
        </connector>
        <inputReference>Get_Asset_Related_to_Case</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Update the Case related to the Service Appointment based on Assignments</description>
        <name>Update_Case_0</name>
        <label>Update Case</label>
        <locationX>2338</locationX>
        <locationY>4716</locationY>
        <connector>
            <targetReference>Update_Start_and_End_Times_of_Other_Scheduled_Appointments</targetReference>
        </connector>
        <inputReference>Get_Case_from_WO</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Color_Not_Live</name>
        <label>Update Color (Not Live)</label>
        <locationX>4802</locationX>
        <locationY>1584</locationY>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Start_and_End_Times_of_Other_Scheduled_Appointments</name>
        <label>Update Start and End Times of Other Scheduled Appointments</label>
        <locationX>2250</locationX>
        <locationY>4932</locationY>
        <inputReference>ServiceAppointmentsForUpdate</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Update the WO based on previous Assignments.</description>
        <name>Update_Work_Order</name>
        <label>Update Work Order</label>
        <locationX>2250</locationX>
        <locationY>3168</locationY>
        <connector>
            <targetReference>What_is_the_Status</targetReference>
        </connector>
        <inputReference>Get_WO_Related_to_SA</inputReference>
    </recordUpdates>
    <start>
        <locationX>3191</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Assign_Prior_Start_Time</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Work_Type_Name__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Service App Job</stringValue>
            </value>
        </filters>
        <object>ServiceAppointment</object>
        <recordTriggerType>Update</recordTriggerType>
        <scheduledPaths>
            <name>On_Site_Reminder</name>
            <connector>
                <targetReference>Service_Appointment_Status</targetReference>
            </connector>
            <label>On-Site Reminder</label>
            <offsetNumber>45</offsetNumber>
            <offsetUnit>Minutes</offsetUnit>
            <recordField>Time_Start_En_Route__c</recordField>
            <timeSource>RecordField</timeSource>
        </scheduledPaths>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <name>Dispatched_Notifications</name>
        <label>Dispatched Notifications</label>
        <locationX>4098</locationX>
        <locationY>3408</locationY>
        <connector>
            <targetReference>Is_the_Case_Closed</targetReference>
        </connector>
        <flowName>Service_Appointment_Dispatched_Notifications</flowName>
        <inputAssignments>
            <name>AssignedResource</name>
            <value>
                <elementReference>Get_Assigned_Resource</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>ServiceAppointment</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>ServiceResource</name>
            <value>
                <elementReference>Get_Service_Resource</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <description>Subflow to &apos;drip dispatch&apos; the next service appointment under certain conditions.</description>
        <name>Drip_Dispatch</name>
        <label>Drip Dispatch</label>
        <locationX>842</locationX>
        <locationY>3528</locationY>
        <connector>
            <targetReference>Is_the_Case_Closed</targetReference>
        </connector>
        <flowName>Service_Appointment_Drip_Dispatch</flowName>
        <inputAssignments>
            <name>AssignedResourceShift</name>
            <value>
                <elementReference>Get_Assigned_Resources_Shifts</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>recordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <description>Uses the previous Service Resource Shift rather than the Assigned Resource Shift</description>
        <name>Drip_Dispatch_Rejected</name>
        <label>Drip Dispatch</label>
        <locationX>50</locationX>
        <locationY>3648</locationY>
        <connector>
            <targetReference>Is_the_Case_Closed</targetReference>
        </connector>
        <flowName>Service_Appointment_Drip_Dispatch</flowName>
        <inputAssignments>
            <name>AssignedResourceShift</name>
            <value>
                <elementReference>Get_Service_Resource_Shift</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>recordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>On_Site_Reminder_Notification</name>
        <label>On-Site Reminder Notification</label>
        <locationX>5066</locationX>
        <locationY>648</locationY>
        <flowName>Service_Appointment_Dispatched_Notifications</flowName>
        <inputAssignments>
            <name>AssignedResource</name>
            <value>
                <elementReference>Get_Assigned_Resource2</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>ServiceAppointment</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>ServiceResource</name>
            <value>
                <elementReference>Get_Service_Resource2</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Scheduled_Notifications</name>
        <label>Scheduled Notifications</label>
        <locationX>3394</locationX>
        <locationY>1128</locationY>
        <connector>
            <targetReference>Get_Territory_from_Service_Appointment</targetReference>
        </connector>
        <flowName>Service_Appointment_Scheduled_Notifications</flowName>
        <inputAssignments>
            <name>AssignedResource</name>
            <value>
                <elementReference>Get_Assigned_Resource</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>ServiceAppointment</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>ServiceResource</name>
            <value>
                <elementReference>Get_Service_Resource</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <textTemplates>
        <description>Text Template used to send a notification to the Field Service Managers Public Group</description>
        <name>SGI_LnW_Repair_Notification</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;Service Appointment: {!$Record.AppointmentNumber} (Link: accelentertainment.lightning.force.com/{!$Record.Id}) has been marked as &quot;Cannot Complete&quot; due to SGI/Lnw Repair Needed. The status of the Service Appointment is {!$Record.Substatus__c}. Tech Notes: {!$Record.Solution_Notes__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Machine Up Upon Departure: {!$Record.Machine_Up_Upon_Departure__c}&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <description>Text Template used to send a notification to the Field Service Managers Public Group that</description>
        <name>SGI_LnW_Repair_Notification_For_RMs</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;{{!Get_AccountId.Relationship_Manager__r.Id}} {{!Get_Regional_Relationship_Manager.Field_Service_Manager__r.Id}}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Service Appointment: {!$Record.AppointmentNumber} (Link: accelentertainment.lightning.force.com/{!$Record.Id}) has been marked as &quot;Cannot Complete&quot; due to SGI/Lnw Repair Needed. The status of the Service Appointment is {!$Record.Substatus__c}. Tech Notes: {!$Record.Solution_Notes__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Machine Up Upon Departure: {!$Record.Machine_Up_Upon_Departure__c}&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <description>Returns the current time.</description>
        <name>CurrentTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>$Flow.CurrentDateTime</elementReference>
        </value>
    </variables>
    <variables>
        <name>PriorStartTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RegionalManager</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RelationshipManger</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ScheduledEndTimeForSALoop</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ScheduledStartTimeForSALoop</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ServiceAppointmentsForUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>ServiceResource</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>ServiceResource</objectType>
    </variables>
</Flow>
